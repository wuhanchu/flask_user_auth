(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{co7R:function(e,t,a){"use strict";var r=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("jehZ")),i=r(a("p0pE"));a("/zsF");var u=r(a("PArb")),d=r(a("d6i3"));a("miYZ");var s=r(a("tsqr")),c=r(a("1l/V")),o=r(a("2Taf")),f=r(a("vZ4D")),h=r(a("l4Ni")),m=r(a("ujKo")),p=r(a("MhPg"));a("y8nQ");var v,b,w,M,g=r(a("Vl3Y")),V=a("gW3F"),k=r(a("ICu8")),y=r(a("L4Hu")),R=n(a("q1tI")),E=r(a("sImR")),F=a("MuoO"),S=V.antdUtils.components.ListPage,x=(v=(0,F.connect)(function(e){var t=e.global;return{dict:t.dict}}),b=g.default.create(),v(w=b((M=function(e){function t(e){var a;return(0,o.default)(this,t),a=(0,h.default)(this,(0,m.default)(t).call(this,e,{schema:V.frSchema.utils.dict.callSchemaDictFunc(k.default.user,e.dict),service:y.default.users})),a.handleRoleModalVisible=function(e,t,r){a.setState({roleModalVisible:!!e,infoData:t,action:r})},a.handleRoleUpdate=function(){var e=(0,c.default)(d.default.mark(function e(t,r){return d.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.default.users.roles.put(t);case 2:a.refreshList(),s.default.success("\u4fee\u6539\u6210\u529f"),a.handleRoleModalVisible();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a}return(0,p.default)(t,e),(0,f.default)(t,[{key:"renderSearchBar",value:function(){var e=this.schema.name,t=this.createFilters({name:e},5);return this.createSearchBar(t)}},{key:"renderOperateColumnExtend",value:function(e){var t=this;return R.default.createElement(R.Fragment,null,R.default.createElement(u.default,{type:"vertical"}),R.default.createElement("a",{onClick:(0,c.default)(d.default.mark(function a(){var r;return d.default.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,y.default.users.roles.get(e);case 2:r=a.sent,t.setState(function(){t.handleRoleModalVisible(!0,(0,i.default)({},e,{role_ids:r.map(function(e){return e.id})}),V.frSchema.actions.edit)});case 4:case"end":return a.stop()}},a)}))},"\u89d2\u8272\u5206\u914d"))}},{key:"renderExtend",value:function(){var e=this.renderForm,t=this.meta,a=t.resource,r=t.title,n=t.addArgs,u=this.state,d=u.roleModalVisible,s=u.infoData,c=u.action,o={handleModalVisible:this.handleRoleModalVisible,handleUpdate:this.handleRoleUpdate},f=this.schema,h=f.id,m=f.name,p=f.role_ids;return d&&R.default.createElement(E.default,(0,l.default)({renderForm:e,title:r,action:c,resource:a},o,{visible:d,values:s,addArgs:n,meta:this.meta,schema:{id:h,name:(0,i.default)({},m,{required:!1,readOnly:!0}),role_ids:(0,i.default)({},p,{required:!0,infoHide:!1})}}))}}]),t}(S),w=M))||w)||w),_=x;t.default=_}}]);